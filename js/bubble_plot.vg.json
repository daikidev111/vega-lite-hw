{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 800,
    "height": 600,
    "title": "Income level against GDP and Unemployment in 2019",
    "data": {
      "url": "https://raw.githubusercontent.com/daikidev111/vega-lite-hw/main/cleaned-data/economics.csv"
    }, 
    "params": [
      {
        "name": "class_highlight",
        "select": {"type": "point", "fields": ["Class"]},
        "bind": "legend"
      }
    ],
    "transform": [
      {"filter": "datum['2019_GDP'] > 0"},
      {"filter": "datum['2019_UNEMP'] > 0"}
    ],
    "encoding": {
      "x": {
        "field": "2019_UNEMP",
        "type": "quantitative",
        "title": "Unemployment rate in 2019",
        "axis": {"tickCount": 7},
        "scale": {"type": "linear", "domain": [0, 30]}
      },
      "y": {
        "field": "2019_GDP",
        "type": "quantitative",
        "title": "GDP per capita in 2019",
        "axis": {"tickCount": 6},
        "scale": {"type": "linear", "domain": [0, 117300]}
      },
      "color": {
        "field": "Class",
        "type": "nominal",
        "scale": {
          "domain": [
            "High Income",
            "Upper Middle Income",
            "Lower Middle Income",
            "Low Income"
          ],
          "range": [
            "#e41a1c",
            "#984ea3",
            "#ff7f00",
            "#a6cee3"
          ]
        }
      }
    },
    "layer": [
      {
        "mark": "circle",
        "encoding": {
          "size": {
            "field": "2019_GNI",
            "type": "quantitative",
            "scale": {
              "type": "threshold",
              "domain": [1000, 5000, 10000, 30000, 50000, 70000],
              "range": [100, 250, 500, 1000, 1500, 2000]
            },
            "legend": {"format": ".1f"}
          },
          "opacity": {
            "condition": {"param": "class_highlight", "value": 0.6},
            "value": 0.2
          },
          "tooltip": [
            {"field": "country", "type": "nominal"},
            {
              "field": "2019_GDP",
              "type": "quantitative",
              "format": ","
            },
            {"field": "2019_UNEMP", "type": "quantitative", "format": ","},
            {
              "field": "2019_GNI",
              "type": "quantitative",
              "format": ","
            }
          ]
        }
      }
    ]
  }